<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"  content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no">
    <title>购物车 - 我的购物车</title>
    <link href="css/shopping_cart.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <link href="css/bootstrap.css" type="text/css" rel="stylesheet">
    <link href="css/animate.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="js/bootstrap.min.js" ></script>
    <script type="text/javascript" src="js/vue.js"></script>
</head>
<body>
<div class="container">
    <div class="header clearfix">
        <div class="header_logo">
            <a href="index.html" class="navbar-brand"><img src="./img/logo-new-toggle@2x_52c2068.png" width="115px" height="20px"> </a>
        </div>
        <div class="header_router clearfix">
            <ol class="breadcrumb" style="background: #fff">
                <li class="active">购物车</li>
                <li ><a href="javascript:void(0)">确认订单</a></li>
                <li><a href="javascript:void(0)">在线支付</a></li>
                <li><a href="javascript:void(0)">完成</a></li>
            </ol>
        </div>
        <div class="header_right clearfix">
            <a href="login.html">我的订单</a>
        </div>

    </div>
    <div class="cart_container">
        <table>
            <tr style="height: 50px">
                <td><input type="checkbox" style=" margin-left: 10px;margin-right: 10px" @change="all()" :checked="allChecked">全选</td>
                <td align="center">商品</td>
                <td>单价(元)</td>
                <td align="center">数量</td>
                <td align="center">小计(元)</td>
                <td align="center">操作</td>
            </tr>
            <tr v-for="(item,index) in product" style="height: 150px">
                <td><input type="checkbox" style=" margin-left: 10px;" :checked="item.checked" v-model="item.checked" @change="checked(index)"></td>
                <td class="cart_product"><img :src="item.img" width="102px" height="102px"><p v-text="item.name"></p><p v-text="item.version"></p></td>
                <td><p v-text="'￥'+item.price+'.00'"  style="color: #e02b41;font-weight: bold"></p></td>
                <td align="center" style="width: 197px"><button type="button"@click="minus(index)" class="glyphicon glyphicon-minus" style="width: 40px;height: 40px;left: 5px;" :class="{limits:item.num==1}"></button>
                    <input type="text" @change="sum(index)" v-model="item.num" style="width: 58px;height: 40px;text-align: center;border: 0.5px solid #ccc;" >
                    <button type="button" @click="add(index)" class="glyphicon glyphicon-plus"style="width: 40px;height: 40px;right: 5px"></button></td>
                <td style="width: 196px" align="center"><p v-text="'￥'+item.sum" v-model="item.sum"  style="color: #e02b41;font-weight: bold"></p></td>
                <td align="center"><a class="glyphicon glyphicon-remove"></a></td>
            </tr>
            <tfoot>
            <tr style="height: 70px;">
                <td colspan="4"><input type="checkbox" style=" margin-left: 10px;margin-right: 10px" @change="all()" :checked="allChecked">全选</td>
                <td align="center"> 合计
                    <span style="font-size: 22px;color:#e02b41;font-weight: bold;" v-text="'￥'+totalPrice+'.00'" v-model="totalPrices"></span></td>
                <td>    <a class="btn btn-primary" style="background-color: #00a7ea;border: none" @click="submit">去结算</a>
                </td>
            </tr>
            </tfoot>
        </table>
    </div>
    <hr>
    <div id="footer">
        <p>&copy;2017 ToZ LAB Design for Meizu Telecom Equipment Co., Ltd. All rights reserved. </p>
    </div>
</div>
<script>
    new Vue({
        el:".container",
        data:{
            product:[
                {name:"魅族PRO 6s",version:"全网通公开版 星空黑 64GB",img:"img/pro6s_black@240x240.jpg",
                    price:2299,num:1,sum:2299,checked:true},
                {name:"魅族PRO7",img:"img/pro7_red@240x240.jpg",version:"全网通公开版 提香红4GB+64GB",
                    price:2499,num:1,sum:2499,checked:true}
            ],
            allChecked:true,
            totalPrice:0,
            productNum:2
        },
       methods:{
            sum: function (index) {
                        this.product[index].sum=this.product[index].num*this.product[index].price;

                },
           minus(index){
                if(this.product[index].num>1){
                    this.product[index].num--;
                    this.sum(index);
                }

           },
           add(index){
               this.product[index].num++;
               this.sum(index);
           },
           checked(index){
               if(this.product[index].checked==false){
                   this.allChecked=false;
                    this.productNum--;
               }
               else
                   this.productNum++;
           },
           all:function(){
               this.allChecked=!this.allChecked;
               for(var i=0;i<this.product.length;i++){
                   this.product[i].checked=this.allChecked;
                   if(this.allChecked==false){
                       this.productNum=0;
                   }
                   else
                       this.productNum=2;
               }
           },
           submit(){
               if(this.productNum!=0)
               location.href="shopping_check.html#"+this.productNum;
           }


        },
        computed:{
            totalPrices:function () {
                this.totalPrice=0;
                for(var i=0;i<this.product.length;i++){
                    if(this.product[i].checked!=false)
                    this.totalPrice+=this.product[i].sum;
                }
                return this.totalPrice;
            }
        }

    });
</script>
</body>
</html>